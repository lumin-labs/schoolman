<div class="row">
	<div class="col-md-2" ng-include="'views/_navstacked.html'"></div>

	<div class="col-md-10 marksheet" ng-controller="MastersheetCtrl2">
		<div class="" style="padding-bottom:10px;">
			<!-- Form Dropdown -->
			<div class="btn-group pull-right" style="margin-right:0px;">
			  <!-- <button type="button" class="active btn btn-default btn-lg">
			    <i class="glyphicon glyphicon-th-large"></i>
			  </button> -->
			  <button type="button" 
			  		  class="btn btn-default btn-lg" 
			  		  ng-class="graphView.view === 'mastersheet' ? 'active' : ''"
			  		  ng-click="setGraphView('mastersheet')">
			    <i class="glyphicon glyphicon-th"></i>
			  </button>
			  <button type="button" 
			  		  class="btn btn-default btn-lg" 
			  		  ng-class="graphView.view === 'barchart' ? 'active' : ''"
			  		  ng-click="setGraphView('barchart')">
			    <i class="glyphicon glyphicon-stats"></i>
			  </button>
			  
			  <!-- <button type="button" class="btn btn-default btn-lg">
			    <i class="glyphicon glyphicon-list"></i>
			  </button> -->
			</div>
		  <div ng-controller="ClassmenuCtrl">
            <nav class="navbar navbar-default" role="navigation" style="margin-bottom:0px;">
              <div class="container-fluid">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </button>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" style="padding-left:5px;">
                  <form class="navbar-form navbar-left" role="search" style="padding-left:0px;">
                    <div class="form-group">
                      <div class="btn-group">
                        <!-- Form Dropdown -->
                        <div class="btn-group">
                          <button class="btn btn-md btn-default dropdown-toggle" data-toggle="dropdown">
                            {{route.form['name']}}   <span class="caret"></span>
                          </button>
                          <ul class="dropdown-menu">
                            <!-- <li>
                              <a ng-click="search.form = ''">All Forms</a>
                            </li>
                            <li class="divider"></li> -->
                            <li ng-repeat="(formIndex, form) in route.forms">
                              <a ng-click="open({formIndex:formIndex})">
                                {{route.forms[formIndex].name}}
                              </a>
                            </li>
                          </ul>
                        </div>
                        <!-- Department Dropdown -->
                        <div  class="btn-group">
                          <button class="btn btn-md btn-default dropdown-toggle" data-toggle="dropdown">
                            {{route.department['name'] || "Select Department"}}   <span class="caret"></span>
                          </button>
                          <ul class="dropdown-menu">
                            <!-- <li>
                              <a ng-click="search.department = ''">All Departments</a>
                            </li> -->
                            <!-- <li class="divider"></li> -->
                            <li ng-repeat="(deptId, dept) in route.departments">
                              <a ng-click="open({deptId:deptId})">
                                {{route.departments[deptId].name}}
                              </a>
                            </li>
                          </ul>
                        </div>
                        <!-- Group Dropdown -->
                        <div  class="btn-group">
                          <button class="btn btn-md btn-default dropdown-toggle" data-toggle="dropdown">
                            {{route.group['name'] || "Select Group"}}
                              <span class="caret"></span> 
                          </button>
                          <ul class="dropdown-menu">
                            <!-- <li>
                              <a ng-click="search.group = ''">All Groups</a>
                            </li>
                            <li class="divider"></li> -->
                            <li ng-repeat="(groupId, group) in route.groups">
                              <a ng-click="open({groupId:groupId})">
                                {{route.groups[groupId].name}}
                              </a>
                            </li>
                          </ul>
                        </div>

                        <!-- Term Dropdown -->
                        <div  class="btn-group">
                          <button class="btn btn-md btn-default dropdown-toggle" data-toggle="dropdown">
                            Term {{route.termIndex + 1}}   <span class="caret"></span>
                          </button>
                          <ul class="dropdown-menu">
                            <!-- <li>
                              <a ng-click="search.group = ''">All Groups</a>
                            </li>
                            <li class="divider"></li> -->
                            <li ng-repeat="(termIndex, term) in [1, 2, 3]">
                              <a ng-click="open({termIndex:termIndex})">
                                Term {{term}}
                              </a>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </nav>
          </div>  
		</div>
		<table class="table table-striped table-bordered table-compact">
			<thead>
				<tr>
					<th colspan="2" class="text-right">
						Coefficients:
					</th>
					<th class="small-column-header"
			      	ng-repeat="(marksheetIndex, marksheet) in data.marksheets">
						{{marksheet.coeff}}
					</th>
					<th class="symbol-column-header">=</th>
					<th class="small-column-header">{{data.summaryMarksheet['coeff']}}</th>
					<th></th>
					<!-- <th></th> -->
				</tr>
				<tr>
					<th>No.</th>
					<th>Name</th>
					<th class="small-column-header" 
          		ng-repeat="(marksheetIndex, marksheet) in data.marksheets"
          		data-toggle="tooltip" 
          		data-placement="right" 
          		title="{{data.subjects[marksheet.subjectId].en}}">
        		 <a ng-click="open({page:'classmasterMarksheet',subjectId:marksheet.subjectId})">
        		 	{{marksheet.subjectId}}
        		 </a>
					</th>
					<th class="symbol-column-header">&sum;</th>
					<th class="symbol-column-header">/</th>
					<th class="small-column-header">Rank</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="(studentIndex, student) in data.students | orderBy:'name'">
					<td class="small-column-header">{{student._id}}</td>
					<td style="width:300px;">
		        <a ng-click="open({page:'classmasterProfile', studentId:student.id})"
		           style="font-size:.8em;" 
		           data-toggle="tooltip" data-placement="right" title="{{student.name}}">{{student.name | limitTo:7}}.</a>
	      	</td>
			    
					<td class="small-column-header"
						ng-repeat="(marksheetId, marksheet) in data.marksheets">
						{{ (data.summaries[marksheetId][student._id] * marksheet.coeff) || ""}}
					</td>
					<td class="small-column-header">
						{{data.summarysheet[student._id] * data.summaryMarksheet['coeff'] | number:1}}
					</td>
					<td class="small-column-header">
						{{data.summarysheet[student._id] | number:1}}
					</td>
					<td class="small-column-header">
						{{data.rankings[student._id][0][0]}}
					</td> 
				</tr>
			</tbody>
		</table>
		<!-- <div title="barchart"
				ng-show="graphView.view === 'barchart'"
				ng-hide="graphView.view !== 'barchart'"
				class="ng-hide table-bordered">
				<div class="d3-barchart"></div>
		</div> -->
	</div>
</div>