<div class="row">
	<div class="col-md-2" ng-include="'views/_navstacked.html'"></div>

	<div class="col-md-10 marksheet" ng-controller="DepartmentsCtrl">
		<div class="printonly"><h3>Department List</h3></div>
		<table class="table table-striped table-bordered">
			<thead>
				<tr class="toolbar noprint">
				  <th style="width:80px;">
	  				<input  type="text" class="form-control" placeholder="Code" ng-model="newDepartment.code">
	  			</th>
					<th>
	  				<input  type="text" class="form-control" placeholder="Department Name" ng-model="newDepartment.name">
	  			</th>
	  			<th class="text-center">
	  				<button type="submit" class="btn btn-default" 
	  				ng-class="newDepartment.code && newDepartment.name ? '' : 'disabled'" 
	  				ng-click="add(newDepartment)">
			        	Add
			        </button>
	  			</th>
	  			<th colspan="8"></th>
				</tr>
				<tr>
					<th>Code</th>
					<th>Name</th>
					<th class="text-center" ng-repeat="form in forms">{{form.name}}</th>
					<th>Students</th>
					<th class="noprint"></th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="(departmentCode, department) in departments">
					<td class="column readonly" style="width:80px;">
						<div class="cell">{{department.code}}</div>
					</td>
					<td class="column readonly">
						<div class="cell">{{department.name}}</div>
					</td>
					<td ng-repeat="(formIndex, form) in department.forms"
						class="text-center">
						<button ng-click="toggleForm(department, formIndex)"
								class="btn btn-md btn-light" style="border:solid 1px #ddd;">
							<i ng-if="department.forms[formIndex] === 0" 
							   class="glyphicon" 
							   style="color:;"></i>
							 <i ng-if="department.forms[formIndex] === 1" 
						   class="glyphicon glyphicon-ok" 
						   style="color:green;"></i>
						</button>
					</td>
					<td>
						{{allStudents[departmentCode].length || 0}}
					</td>
					<td class="remove text-center noprint" style="width:80px;">
						<a ng-click="remove(department)" 
						   ng-if="allStudents[departmentCode].length === 0">
							<i class="glyphicon glyphicon-remove"></i>
						</a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>