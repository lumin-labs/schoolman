<div class="row ">
	<div class="col-md-2" ng-include="'views/_navstacked.html'"></div>
	<div class="col-md-10 marksheet" ng-controller="StudentsCtrl">
		<div style="margin-bottom:10px;">
			<div ng-controller="ClassmenuCtrl">
			  <nav class="navbar navbar-default" role="navigation">
				  <div class="container-fluid">
				    <div class="navbar-header">
				      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				        <span class="sr-only">Toggle navigation</span>
				        <span class="icon-bar"></span>
				        <span class="icon-bar"></span>
				        <span class="icon-bar"></span>
				      </button>
				    </div>
				    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" style="padding-left:5px;">
				      <form class="navbar-form navbar-left" role="search" style="padding-left:0px;">
						        

						    <div class="form-group">
						    	<div class="btn-group">
									  <button type="button" class="btn btn-default">
									  	<input type="checkbox">
									  </button>
									</div>
						    </div>

				        <div class="form-group">
				          <div class="btn-group">
				          	<!-- Form Dropdown -->
									  <div class="btn-group">
									    <button class="btn btn-md btn-default dropdown-toggle" data-toggle="dropdown">
									      {{forms[search.form].name || "All Forms"}} <span class="caret"></span>
									    </button>
									    <ul class="dropdown-menu">
									    	<li>
									    		<a ng-click="search.form = ''">All Forms</a>
									    	</li>
									    	<li class="divider"></li>
									      <li ng-repeat="(formIndex, form) in forms">
									        <a ng-click="search.form = formIndex">
									        	{{forms[formIndex].name}}
									        </a>
									      </li>
									    </ul>
									  </div>
									  <!-- Department Dropdown -->
									  <div  class="btn-group">
									    <button class="btn btn-md btn-default dropdown-toggle" data-toggle="dropdown">
									      {{departments[search.department].name || "All Departments"}} <span class="caret"></span>
									    </button>
									    <ul class="dropdown-menu">
									    	<li>
									    		<a ng-click="search.department = ''">All Departments</a>
									    	</li>
									    	<li class="divider"></li>
									      <li ng-repeat="(deptKey, dept) in departments">
									        <a ng-click="search.department = deptKey">
									        	{{departments[deptKey].name}}
									        </a>
									      </li>
									    </ul>
									  </div>
					          <!-- Group Dropdown -->
									  <div  class="btn-group">
									    <button class="btn btn-md btn-default dropdown-toggle" data-toggle="dropdown">
									      {{groups[search.group].name || "All Groups"}} <span class="caret"></span>
									    </button>
									    <ul class="dropdown-menu">
									    	<li>
									    		<a ng-click="search.group = ''">All Groups</a>
									    	</li>
									    	<li class="divider"></li>
									      <li ng-repeat="(groupKey, group) in groups">
									        <a ng-click="search.group = groupKey">
									        	{{groups[groupKey].name}}
									        </a>
									      </li>
									    </ul>
									  </div>
									</div>
								</div>

				        <div class="form-group">
				          <input style="" 
				          			 type="text" 
				          			 class="form-control" 
				          			 placeholder="Search"
				          		 	 ng-model="search.$">
				        </div>
				      </form>
				    </div>
				  </div>
				</nav>

			</div>
		</div>
		<!-- Student View -->
		<table class="table table-striped table-bordered table-compact">
			<thead>
				
				<tr>
					<th>select</th>
					<th style="width:100px;">ID</th>
					<th>Name</th>
					<th>Gender</th>
					<th>Birth Date</th>
					<th>Parent Name</th>
					<th>Parent Phone</th>
					<th>Parent Email</th>
					<th>Form</th>
					<th>Dept.</th>
					<th>Class</th>
					<th>Fee Due</th>
					<th>Promotion</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="(studentIndex, student) in students | filter:search">
					<td class="text-center" style="vertical-align:middle;">
						<input type="checkbox">
					</td>
					<td style="width:100px;">
						<a ng-click="open({studentId:student.id, page:'registrarProfile'})">{{student.id}}</a>
					</td>
					<td>{{student.name}}</td>
					<td>{{student.sex}}</td>
					<td>{{student.birth | date:'dd-mm-yyyy'}}</td>
					<td>{{student.parentName}}</td>
					<td>{{student.parentPhone}}</td>
					<td>{{student.parentEmail}}</td>
					<td>{{forms[student.form].name}}</td>
					<td>{{departments[student.department].name}}</td>
					<td>{{groups[student.group].name}}</td>
					<td>
						{{fees[student.feeGroup].amount - student.totalPaid() | currency:""}}
					</td>
					<td class="promotion">
						<div  class="btn-group">
						  <!-- If status is set to automatic -->
							<button ng-if="student.status['2014'] === 0 && studentStatus[student.id]"
							      	class="btn btn-sm btn-success dropdown-toggle" 
							      	data-toggle="dropdown">
								<i class="glyphicon" 
								   ng-class="PROMOTE_OPTIONS[0].icon"></i>
								&nbsp;{{PROMOTE_OPTIONS[1].name}}
							</button>
					    
							<button ng-if="student.status['2014'] === 0 && !studentStatus[student.id]"
							      class="btn btn-sm btn-warning dropdown-toggle" 
							      data-toggle="dropdown">
							    <i class="glyphicon" 
								   ng-class="PROMOTE_OPTIONS[0].icon"></i>
								&nbsp;{{PROMOTE_OPTIONS[2].name}}
							</button>
					      
						  <!-- Otherwise show whatever it's manually set to -->
						  	<button ng-if="student.status['2014'] > 0"
						  	        class="btn btn-sm dropdown-toggle" 
						  	        ng-class="'btn-'+PROMOTE_OPTIONS[student.status['2014']].style"
						  	        data-toggle="dropdown">
						  	    <i ng-class="PROMOTE_OPTIONS[student.status['2014']].icon"></i>
						  		&nbsp;{{PROMOTE_OPTIONS[student.status['2014']].name}}
						  	</button>
					    
							<ul class="dropdown-menu">
							  <li>
							    <a ng-click="student.setStatus('2014', 0)">
							    	<i ng-class="PROMOTE_OPTIONS[0].icon"></i>
							    	{{PROMOTE_OPTIONS[0].name}}
							    </a>
							  </li>
							  <li class="divider"></li>
							  <li ng-repeat="(optionIndex, option) in PROMOTE_OPTIONS.slice(1)">
							    <a ng-click="student.setStatus('2014', optionIndex + 1)">
							    	<i ng-class="PROMOTE_OPTIONS[optionIndex + 1].icon"></i>
							    	{{PROMOTE_OPTIONS[optionIndex + 1].name}}
							    </a>
							  </li>
							</ul>
					  </div><!-- /btn-group -->
	  				</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>	

